/**
 *  @name:      redcore-webUI
 *  @version:   1.0.0
 *  @author:    redcore
 *  @desc:      redcore 内核webUI 页面开发
 *  @license:   ISC
 *  @copyright: Copyright 2018 The Redcore (Beijing) Technology Co.,Ltd. All rights reserved.
 */
var appMarketList=[];function generateTab(a,i,e){if(appMarketList=a,"none"===$("#tab-wrap-market").css("display")){var t=$.extend({icon:"imgs/defaultIcon.png",label:"",href:"#"},e),n="",s="";a.forEach(function(a,e){var c=0==e?"am-active":"",o="<li class='"+c+"'><a style='display: inline-block' href='javascript: void(0)'>"+a.name+"</a></li>";n+=o;var r="";a.applicationList.forEach(function(a){var e;(!a.isMarketApplication||a.isMarketApplication&&a.isVisible)&&(r+='<a class="linkitem" href="'+((e=a).address||t.href)+'" ><div class="linkitem-icon"><img src="'+(/\:\/\//.test(e.logoUrl)?e.logoUrl||t.icon:i.company.managerServer+e.logoUrl)+'" alt="icon" /></div><div class="linkitem-content">'+(e.name||t.label)+"</div></a>")}),s+='<div class="am-tab-panel '+c+'"><div class="linkitems-wrap"><div class="linkitems">'+(r+='<a class="linkitem addAppButton" href="javascript:void(0)" ><div class="linkitem-icon"><img  src="./imgs/add_icon.svg" alt="icon" /></div><div class="linkitem-content">应用管理</div></a>')+"</div></div></div>"}),$("#tab-wrap").empty(),$("#tab-wrap").append("<div class='am-tabs' id='nav-tabs'><ul class='am-tabs-nav am-nav am-nav-tabs'>"+n+"</ul><div class='am-tabs-bd'>"+s+"</div></div>"),$("#nav-tabs").tabs({noSwipe:1}),$("img").error(function(){$(this).attr("src","./imgs/load_failure_icon.png")})}}function generateAppMarket(a){var i="";a.forEach(function(a,e){var t,n;i+="<div>",i+="    <h3>",i+="       <span>"+a.name+"</span>",i+="    </h3>",i+='    <ul class="mui-table-view mui-grid-view mui-grid-9">',i+=(t=a.applicationList,n="",t.forEach(function(a,i){if(a.isMarketApplication){var e="";e+="<li>",e+="    <img src="+a.logoUrl+">",e+="    <h4>",e+="       <span>"+a.name+"</span>",e+="    </h4>",e+="    <div>",e+="       <input id="+a.id+' class="tgl tgl-light" '+(a.isVisible?"checked":"")+' type="checkbox">',e+="       <label appId="+a.id+' class="tgl-btn setApp" for='+a.id+"></label>",e+="    </div>",n+=e+="</li>"}}),n),i+="    </ul>",i+="</div>",$("#market_container").empty(),$("#market_container").append(i)}),$("img").error(function(){$(this).attr("src","./imgs/load_failure_icon.png")})}function destroyTabs(){$("#nav-tabs").empty(),$("#company_domain").hide(),$("#company_userMessage").show(),$("#company_QRcode").hide(),$("#code_pack_qrcodeInvalid").hide(),$("#code_pack_qrcodeSuccess").hide(),$("#code_pack").hide()}$(document).on("click",".addAppButton",function(){generateAppMarket(appMarketList),$("#homePage").hide(),$("#tab-wrap-market").show()}),$(document).on("click","#back_app",function(){$("#homePage").show(),$("#tab-wrap-market").hide(),HOMEPROXY.getAppGroupList()}),$(document).on("click",".setApp",function(a){var i=$(this).attr("appId"),e=!$("#"+i).get(0).checked;HOMEPROXY.setApplicationInfo(i,e)});var Tabs={};window.Tabs=Tabs,Tabs.generate=generateTab,Tabs.destroy=destroyTabs;