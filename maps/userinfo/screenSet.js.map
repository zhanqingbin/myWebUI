/**
 *  @name:      redcore-webUI
 *  @version:   1.0.0
 *  @author:    redcore
 *  @desc:      redcore 内核webUI 页面开发
 *  @license:   ISC
 *  @copyright: Copyright 2018 The Redcore (Beijing) Technology Co.,Ltd. All rights reserved.
 */
{"version":3,"sources":["userinfo/screenSet.js"],"names":["cfg","holder","pop_pin_error","pop_pin_success","tmpl_pop","screen_set","Symbol","for","req_getLockTime","ScreenSet","[object Object]","opt","Object","assign","this","document","getElementById","initEvt","ins","chrome","send","data","$","html","that","click","body","append","show","hide","remove","origin","val","newset","confirm","modifyPIN1","modifyPIN3","test","modifyPIN4","elValid","find","removeClass","console","log","addClass"],"mappings":"AAIA,MAAMA,IAAM,CACVC,OAAQ,iBACRC,cAAe,+JAKfC,gBAAiB,4LAMjBC,SAAU,88BAyBNC,WAAaC,OAAOC,IAAI,kBACxBC,gBAAkBF,OAAOC,IAAI,YACnC,MAAME,UACJC,YAAYC,GACNA,GACFC,OAAOC,OAAOb,IAAKW,GAErBG,KAAKb,OAASc,SAASC,eAAehB,IAAIC,QAC1Ca,KAAKN,mBACLM,KAAKG,UAIPC,iBAIE,OAHwB,MAApBJ,KAAKT,aAAwBS,KAAKT,cACpCS,KAAKT,YAAc,IAAII,WAElBK,KAAKT,YAGdK,CAACF,mBACCW,OAAOC,KAAK,qBAGdV,YAAYW,GACVC,EAAE,yBAAyBC,QAAQF,QAGrCX,UACE,IAAIc,EAAOV,KACXQ,EAAE,oBAAoBG,MAAM,WAgC1B,OA/BAH,EAAEP,SAASW,MAAMC,OAAOL,EAAEtB,IAAII,WAC9BkB,EAAE,uBAAuBM,OAEzBN,EAAE,8BAA8BG,MAAM,WAEpC,OADAH,EAAE,uBAAuBO,OAAOC,UACzB,IAGTR,EAAE,0BAA0BG,MAAM,WAChC,IAAIM,EAAST,EAAE,uBAAuBU,MAClCC,EAASX,EAAE,oBAAoBU,MAC/BE,EAAUZ,EAAE,wBAAwBU,MACxC,IAAKD,IAAWE,IAAWC,EAEzB,OADAV,EAAKW,cACE,EAET,GAAIF,GAAUC,EAEZ,OADAV,EAAKY,cACE,EAET,IAAK,UAAUC,KAAKJ,GAElB,OADAT,EAAKc,cACE,EAET,IAAIC,EAAUjB,EAAE,uBAAuBkB,KAAK,mBAK5C,OAJAD,EAAQE,YAAY,SACpBF,EAAQC,KAAK,QAAQjB,KAAK,IAC1BmB,QAAQC,aAAaZ,KAAUE,KAAUC,KACzCf,OAAOC,KAAK,gBAAiB,CAACW,EAAQE,EAAQC,KACvC,KAEF,IAIXxB,aACEY,EAAE,uBAAuBQ,SAI3BpB,aACE,IAAI6B,EAAUjB,EAAE,uBAAuBkB,KAAK,mBAC5CD,EAAQK,SAAS,SACjBL,EAAQC,KAAK,QAAQjB,KAAK,aAG5Bb,aACE,IAAI6B,EAAUjB,EAAE,uBAAuBkB,KAAK,mBAC5CD,EAAQK,SAAS,SACjBL,EAAQC,KAAK,QAAQjB,KAAK,aAE5Bb,aACE,IAAI6B,EAAUjB,EAAE,uBAAuBkB,KAAK,mBAC5CD,EAAQK,SAAS,SACjBL,EAAQC,KAAK,QAAQjB,KAAK,kBAE5Bb,aACE,IAAI6B,EAAUjB,EAAE,uBAAuBkB,KAAK,mBAC5CD,EAAQK,SAAS,SACjBL,EAAQC,KAAK,QAAQjB,KAAK,cAE5Bb,aACE,IAAI6B,EAAUjB,EAAE,uBAAuBkB,KAAK,mBAC5CD,EAAQK,SAAS,SACjBL,EAAQC,KAAK,QAAQjB,KAAK","file":"../../src/userinfo/screenSet.js","sourcesContent":["// Copyright 2018 The Redcore (Beijing) Technology Co.,Ltd. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nconst cfg = {\n  holder: 'rdc_screen_set',\n  pop_pin_error: `<div id=\"rdc_pop_modify_psw\" class=\"rdc-masker-fix\">\n\t\t<div class=\"rdc-masker-content rdc-pos-mm\">\n\t\t\t<h5>修改锁屏密码</h5>\n\t\t\t<p>{error}</p>\n\t</div>`,\n  pop_pin_success: `<div id=\"rdc_pop_modify_psw\" class=\"rdc-masker-fix\">\n\t\t<div class=\"rdc-masker-content rdc-pos-mm\">\n\t\t\t<h5>修改锁屏密码</h5>\n\t\t\t<p>锁屏密码修改成功，浏览器将自动退出，请重新登录。</p>\n\t\t</div>\n\t</div>`,\n  tmpl_pop: `<div id=\"rdc_pop_modify_pin\" class=\"rdc-masker-fix\">\n\t\t<div class=\"rdc-masker-content rdc-pos-mm\">\n\t\t\t<h5>修改锁屏密码</h5>\n\t\t\t<div id=\"frm_rdc_modify_pin\" class=\"rdc-content rdc-pop\">\n\t\t\t\t<div class=\"rdc-form-row\">\n\t\t\t\t\t<label>请输入原锁屏密码</label> <input id=\"txt_rdc_pin_origin\" type=\"password\" name=\"originalPIN\">\n\t\t\t\t</div>\n\t\t\t\t<div class=\"rdc-form-row\">\n\t\t\t\t\t<label>请输入新锁屏密码</label> <input id=\"txt_rdc_pin_new\" type=\"password\" name=\"newPIN\">\n\t\t\t\t</div>\n\t\t\t\t<div class=\"rdc-form-row\">\n\t\t\t\t\t<label>确认新锁屏密码</label> <input id=\"txt_rdc_pin_confirm\" type=\"password\" name=\"newPINConfirm\">\n\t\t\t\t</div>\n\t\t\t\t<div class=\"rdc-form-valid\">\n\t\t\t\t\t<span></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"rdc-ctl-br\">\n\t\t\t\t\t<button id=\"btn_rdc_modify_pin_cancel\" class=\"rdc-btn\">取消</button>\n\t\t\t\t\t<button id=\"btn_rdc_modify_pin_ok\" class=\"rdc-btn primary\">确定</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>`\n}\n\nconst screen_set = Symbol.for('screen_set_ins');\nconst req_getLockTime = Symbol.for('LockTime');\nclass ScreenSet {\n  constructor(opt) {\n    if (opt) {\n      Object.assign(cfg, opt)\n    }\n    this.holder = document.getElementById(cfg.holder)\n    this[req_getLockTime]();\n    this.initEvt();\n  }\n\n\n  static get ins() {\n    if (this[screen_set] == null || !this[screen_set]) {\n      this[screen_set] = new ScreenSet()\n    }\n    return this[screen_set]\n  }\n\n  [req_getLockTime]() {\n    chrome.send('getLockScreenTime')\n  }\n\n  setLockTime(data) {\n    $('#rdc_srceen_lock_time').html(`${data} 分钟`)\n  }\n\n  initEvt() {\n    let that = this;\n    $('#btn_rdc_showPop').click(function() {\n      $(document.body).append($(cfg.tmpl_pop))\n      $('#rdc_pop_modify_pin').show();\n\n      $('#btn_rdc_modify_pin_cancel').click(function() {\n        $('#rdc_pop_modify_pin').hide().remove();\n        return false;\n      })\n\n      $('#btn_rdc_modify_pin_ok').click(function() {\n        let origin = $('#txt_rdc_pin_origin').val()\n        let newset = $('#txt_rdc_pin_new').val()\n        let confirm = $('#txt_rdc_pin_confirm').val()\n        if (!origin || !newset || !confirm) {\n          that.modifyPIN1()\n          return false\n        }\n        if (newset != confirm) {\n          that.modifyPIN3()\n          return false\n        }\n        if (!/^\\d{6}$/.test(newset)) {\n          that.modifyPIN4()\n          return false\n        }\n        let elValid = $('#rdc_pop_modify_pin').find('.rdc-form-valid')\n        elValid.removeClass('error');\n        elValid.find('span').html('')\n        console.log(`param:${origin},${newset},${confirm}`)\n        chrome.send('modifyPINCode', [origin, newset, confirm])\n        return false;\n      })\n      return false;\n    });\n  }\n\n  modifyPIN0() {\n    $('#rdc_pop_modify_pin').remove();\n    // $(document.body).append(cfg.pop_pin_success)\n  }\n\n  modifyPIN1() {\n    let elValid = $('#rdc_pop_modify_pin').find('.rdc-form-valid')\n    elValid.addClass('error');\n    elValid.find('span').html('锁屏密码不能为空！')\n  }\n\n  modifyPIN2() {\n    let elValid = $('#rdc_pop_modify_pin').find('.rdc-form-valid')\n    elValid.addClass('error');\n    elValid.find('span').html('原始锁屏密码不正确')\n  }\n  modifyPIN3() {\n    let elValid = $('#rdc_pop_modify_pin').find('.rdc-form-valid')\n    elValid.addClass('error');\n    elValid.find('span').html('锁屏密码和确认锁屏密码不一致')\n  }\n  modifyPIN4() {\n    let elValid = $('#rdc_pop_modify_pin').find('.rdc-form-valid')\n    elValid.addClass('error');\n    elValid.find('span').html('锁屏密码不是6位数字')\n  }\n  modifyPIN5() {\n    let elValid = $('#rdc_pop_modify_pin').find('.rdc-form-valid')\n    elValid.addClass('error');\n    elValid.find('span').html('原始锁屏密码和新锁屏密码一致')\n  }\n}\n"]}