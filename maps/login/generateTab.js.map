/**
 *  @name:      redcore-webUI
 *  @version:   1.0.0
 *  @author:    redcore
 *  @desc:      redcore 内核webUI 页面开发
 *  @license:   ISC
 *  @copyright: Copyright 2018 The Redcore (Beijing) Technology Co.,Ltd. All rights reserved.
 */
{"version":3,"sources":["login/generateTab.js"],"names":["appMarketList","generateTab","navData","accountInfo","config","$","css","_config","extend","icon","label","href","tabNavs","tabPanels","forEach","items","index","active","nav","name","linkItems","applicationList","item","data","isMarketApplication","isVisible","address","test","logoUrl","company","managerServer","empty","append","tabs","noSwipe","error","this","attr","generateAppMarket","html","list","htmls","id","destroyTabs","hide","show","document","on","HOMEPROXY","getAppGroupList","obj","appId","get","checked","setApplicationInfo","Tabs","window","generate","destroy"],"mappings":"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","file":"../../src/login/generateTab.js","sourcesContent":["/**\r\n * generate tab\r\n * @param {array} tab data \r\n * @param {obj} set default icon,href,label \r\n */\r\nvar appMarketList = [];\r\n\r\nfunction generateTab(navData, accountInfo, config) {\r\n    appMarketList = navData;\r\n    if (!($('#tab-wrap-market').css('display') === 'none')) {\r\n        return;\r\n    }\r\n    var _config = $.extend({\r\n        icon: 'imgs/defaultIcon.png',\r\n        label: '',\r\n        href: '#',\r\n    }, config);\r\n\r\n    var itemTemplate = function(data) {\r\n        var href = data.address || _config.href;\r\n        var iconSrc;\r\n        if (!/\\:\\/\\//.test(data.logoUrl)) {\r\n            iconSrc = accountInfo.company.managerServer + data.logoUrl\r\n        } else\r\n            iconSrc = data.logoUrl || _config.icon;\r\n        var label = data.name || _config.label;\r\n        return '<a class=\"linkitem\" href=\"' + href + '\" ><div class=\"linkitem-icon\"><img src=\"' + iconSrc + '\" alt=\"icon\" /></div><div class=\"linkitem-content\">' + label + '</div></a>'\r\n    };\r\n\r\n    var tabNavs = '';\r\n    var tabPanels = '';\r\n\r\n    navData.forEach(function(items, index) {\r\n        var active = index == 0 ? 'am-active' : '';\r\n        var nav = \"<li class='\" + active + \"'><a style='display: inline-block' href='javascript: void(0)'>\" + items.name + \"</a></li>\";\r\n        tabNavs += nav;\r\n\r\n        var linkItems = '';\r\n        items.applicationList.forEach(function(item) {\r\n            if (!item.isMarketApplication || (item.isMarketApplication && item.isVisible)) {\r\n                linkItems += itemTemplate(item);\r\n            }\r\n        });\r\n\r\n        // 应用市场添加按钮\r\n        linkItems +=\r\n            '<a class=\"linkitem addAppButton\" href=\"javascript:void(0)\" >' +\r\n            '<div class=\"linkitem-icon\">' +\r\n            '<img  src=\"./imgs/add_icon.svg\" alt=\"icon\" />' +\r\n            '</div>' +\r\n            '<div class=\"linkitem-content\">应用管理</div>' +\r\n            '</a>'\r\n\r\n        var panel = '<div class=\"am-tab-panel ' + active + '\"><div class=\"linkitems-wrap\"><div class=\"linkitems\">' + linkItems + '</div></div></div>';\r\n\r\n        tabPanels += panel;\r\n    })\r\n\r\n    $('#tab-wrap').empty();\r\n\r\n    $('#tab-wrap').append(\"<div class='am-tabs' id='nav-tabs'><ul class='am-tabs-nav am-nav am-nav-tabs'>\" + tabNavs + \"</ul><div class='am-tabs-bd'>\" + tabPanels + \"</div></div>\");\r\n    $('#nav-tabs').tabs({ noSwipe: 1 });\r\n\r\n    $('img').error(function() {\r\n        $(this).attr('src', \"./imgs/load_failure_icon.png\");\r\n    });\r\n}\r\n\r\n\r\n// 应用市场开始————————————————————————————————————————————————————————\r\n$(document).on(\"click\", \".addAppButton\", function() {\r\n    generateAppMarket(appMarketList);\r\n    $(\"#homePage\").hide();\r\n    $(\"#tab-wrap-market\").show();\r\n});\r\n// 返回应用列表\r\n$(document).on(\"click\", \"#back_app\", function() {\r\n    $(\"#homePage\").show();\r\n    $(\"#tab-wrap-market\").hide();\r\n    HOMEPROXY.getAppGroupList();\r\n    // generateTab(appMarketList);\r\n});\r\n\r\n// 加载应用市场\r\nfunction generateAppMarket(appMarketList) {\r\n    var html = '';\r\n    appMarketList.forEach(function(items, index) {\r\n        // 创建其他应用组\r\n        html += '<div>';\r\n        html += '    <h3>';\r\n        html += '       <span>' + items.name + '</span>';\r\n        html += '    </h3>';\r\n        html += '    <ul class=\"mui-table-view mui-grid-view mui-grid-9\">';\r\n        html += _createAPP(items.applicationList);\r\n        html += '    </ul>';\r\n        html += '</div>';\r\n        $(\"#market_container\").empty();\r\n        $(\"#market_container\").append(html);\r\n\r\n    });\r\n\r\n    function _createAPP(list) {\r\n        var htmls = '';\r\n        list.forEach(function(items, index) {\r\n            if (items.isMarketApplication) {\r\n                var html = '';\r\n                html += '<li>';\r\n                html += '    <img src=' + items.logoUrl + '>';\r\n                html += '    <h4>';\r\n                html += '       <span>' + items.name + '</span>';\r\n                html += '    </h4>';\r\n                html += '    <div>';\r\n                html += '       <input id=' + items.id + ' class=\"tgl tgl-light\" ' + (items.isVisible ? \"checked\" : \"\") + ' type=\"checkbox\">';\r\n                html += '       <label appId=' + items.id + ' class=\"tgl-btn setApp\" for=' + items.id + '></label>';\r\n                html += '    </div>';\r\n                html += '</li>';\r\n                htmls += html;\r\n            }\r\n        });\r\n        return htmls;\r\n    }\r\n\r\n    $('img').error(function() {\r\n        $(this).attr('src', \"./imgs/load_failure_icon.png\");\r\n    });\r\n}\r\n\r\n$(document).on(\"click\", \".setApp\", function(obj) {\r\n    var appId = $(this).attr(\"appId\");\r\n    var isVisible = !$(\"#\" + appId).get(0).checked\r\n    HOMEPROXY.setApplicationInfo(appId, isVisible);\r\n});\r\n\r\nfunction destroyTabs() {\r\n    $('#nav-tabs').empty();\r\n\r\n    $('#company_domain').hide();\r\n    $('#company_userMessage').show();\r\n    $('#company_QRcode').hide();\r\n    $('#code_pack_qrcodeInvalid').hide();\r\n    $('#code_pack_qrcodeSuccess').hide();\r\n    $('#code_pack').hide();\r\n}\r\n\r\n\r\n// 应用市场结束————————————————————————————————————————————————————————\r\n\r\n// 首页数据\r\n// var applists = [\r\n//     {\r\n//         \"applicationList\": [\r\n//             {\r\n//                 \"address\": \"http://www.yunshipei.com/index.html\",\r\n//                 \"id\": \"d28d1640-69c5-4\",\r\n//                 \"level\": 1,\r\n//                 \"logoUrl\": \"http://www.test.html\",\r\n//                 \"name\": \"红芯云适配官网\",\r\n//                 \"type\": 1,\r\n//                 \"isMarketApplication\": false,\r\n//                 \"isVisible\": true,\r\n//             }\r\n//         ],\r\n//         \"id\": \"0d1f9d02-e788-11\",\r\n//         \"index\": 1,\r\n//         \"name\": \"默认应用组\",\r\n//         \"type\": 1\r\n//     }\r\n// ];\r\n// generateTab (applists);\r\n\r\n\r\nvar Tabs = {};\r\nwindow.Tabs = Tabs;\r\n\r\nTabs.generate = generateTab;\r\nTabs.destroy = destroyTabs;\r\n\r\n// GET_APP_GROUP_LIST_NOTIFICATION"]}